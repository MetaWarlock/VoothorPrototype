# Helicopter System Documentation

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –≤–µ—Ä—Ç–æ–ª—ë—Ç–∞ –≤ –∏–≥—Ä–µ Helicopter Taxi - –ø–æ–ª–Ω–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π.

## –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤:
- ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞
- ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –µ—Å—Ç—å, —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- ‚ùå **–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## 1. Helicopter Movement System ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

### üèóÔ∏è **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (2025.08.01)**
–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π:

```
üìÅ Assets/02 Scripts/Helicopter/
‚îú‚îÄ‚îÄ üìÅ Core/
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterController.cs        - –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterSettings.cs          - ScriptableObject —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterVisualEffects.cs     - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–Ω–∞–∫–ª–æ–Ω, —Ñ–ª–∏–ø)
‚îÇ   ‚îî‚îÄ‚îÄ HelicopterEvents.cs            - –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ üìÅ Physics/
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterPhysics.cs           - –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterStateManager.cs      - –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ HelicopterCollisionDetector.cs - –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–ª–ª–∏–∑–∏–π (8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ raycast)
‚îú‚îÄ‚îÄ üìÅ Health/
‚îÇ   ‚îú‚îÄ‚îÄ HealthManager.cs               - –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterHealthIntegration.cs - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–¥–æ—Ä–æ–≤—å—è —Å –≤–µ—Ä—Ç–æ–ª–µ—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ HelicopterDamageTrigger.cs     - Trigger –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —É—Ä–æ–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ SimpleHealthBar.cs             - UI –ø–æ–ª–æ—Å–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îú‚îÄ‚îÄ üìÅ Visual/
‚îÇ   ‚îî‚îÄ‚îÄ PropellerRotation.cs           - –ê–Ω–∏–º–∞—Ü–∏—è –≤–∏–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ üìÅ Testing/
    ‚îî‚îÄ‚îÄ HelicopterTester.cs            - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
```

### üéØ **–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (State Machine)**
```csharp
enum HelicopterState
{
    Flying,      // –í –≤–æ–∑–¥—É—Ö–µ - –ø–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–∏–∑–∫–æ–µ —Ç—Ä–µ–Ω–∏–µ
    Grounded,    // –ù–∞ –∑–µ–º–ª–µ - –≤—ã—Å–æ–∫–æ–µ —Ç—Ä–µ–Ω–∏–µ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ç—è–≥–∞
}
```

### ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏:**
- **üÜï –†–∞–∑–¥–µ–ª—å–Ω–∞—è —Ñ–∏–∑–∏–∫–∞**: –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π/–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π —Ç—è–≥–∏
- **üÜï –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É Flying/Grounded
- **üÜï –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏**: 8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è raycast –¥–µ—Ç–µ–∫—Ü–∏—è —Å separation vectors
- **üÜï –§–∏–∑–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —É—Ä–æ–Ω**: –£—Ä–æ–Ω –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é —É–¥–∞—Ä–∞
- **üÜï –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ**: –¢—Ä–µ–Ω–∏–µ –Ω–µ –º–µ—à–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–º—É –ø–∞–¥–µ–Ω–∏—é –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏
- **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã**: –ù–∞–∫–ª–æ–Ω –∫–æ—Ä–ø—É—Å–∞, —Ñ–ª–∏–ø —Å–ø—Ä–∞–π—Ç–∞, –≤—Ä–∞—â–µ–Ω–∏–µ –≤–∏–Ω—Ç–æ–≤

- **–°–æ–±—ã—Ç–∏—è**: UnityEvents –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### üîß **–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```csharp
// –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—è–≥–∏
horizontalMaxSpeed = 5f;        // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
verticalMaxSpeed = 6f;          // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
horizontalAcceleration = 12f;   // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è —Ç—è–≥–∞
verticalAcceleration = 15f;     // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç—è–≥–∞

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–Ω–∏—è
airDrag = 1f;                   // –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –≤–æ–∑–¥—É—Ö–∞ –≤ –ø–æ–ª–µ—Ç–µ
groundDrag = 5f;                // –¢—Ä–µ–Ω–∏–µ –Ω–∞ –∑–µ–º–ª–µ

// –≠—Ñ—Ñ–µ–∫—Ç—ã
tiltStrength = 20f;             // –°–∏–ª–∞ –Ω–∞–∫–ª–æ–Ω–∞ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
visualSmoothness = 5f;          // –ü–ª–∞–≤–Ω–æ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
```

---

## 2. Core Components

### HelicopterController.cs - –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
**–§—É–Ω–∫—Ü–∏–∏:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Input System
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞
- –°–æ–±—ã—Ç–∏—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `Initialize()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º
- `HandleInput()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `UpdateSystems()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä

### HelicopterSettings.cs - ScriptableObject —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ –¥–∞–Ω–Ω—ã—Ö
- –õ–µ–≥–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
```csharp
[CreateAssetMenu(menuName = "Helicopter/Custom Settings")]
public class CustomHelicopterSettings : HelicopterSettings
{
    // –í–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    public float customParameter = 1.0f;
}
```

### HelicopterEvents.cs - –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π ‚ö°
**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∏–≥—Ä—ã.**

**–°–æ–±—ã—Ç–∏—è:**
- `OnStateChanged(newState, previousState)` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞
- `OnCollision(velocity, contacts)` - —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞)


**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:**
```csharp
// –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
public class HelicopterStateData
{
    public HelicopterState currentState;
    public HelicopterState previousState;
    public float timeInCurrentState;
    public Vector2 surfaceNormal;
    public bool isGrounded;
    
    public float distanceToGround;
}

// –ö–∞—Å—Ç–æ–º–Ω—ã–µ UnityEvents
public class HelicopterStateEvent : UnityEvent<HelicopterState, HelicopterState>
public class HelicopterCollisionEvent : UnityEvent<Vector2, ContactPoint2D[]>
public class HelicopterWaterEvent : UnityEvent<bool>
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π:**
```csharp
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
HelicopterEvents.OnStateChanged.AddListener(OnHelicopterStateChanged);
HelicopterEvents.OnCollision.AddListener(OnHelicopterCollision);


// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (–≤–∞–∂–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏)
HelicopterEvents.ClearAllEvents();
```

### üîß **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

**IHelicopterStateListener** - –¥–ª—è —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```csharp
public interface IHelicopterStateListener
{
    void OnStateChanged(HelicopterState newState, HelicopterState previousState);
}
```

**IHelicopterPhysicsSystem** - –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º:
```csharp
public interface IHelicopterPhysicsSystem
{
    void Initialize(HelicopterSettings settings);
    void UpdatePhysics(Vector2 input, HelicopterState currentState, HelicopterStateData stateData);
    Vector2 CurrentVelocity { get; }
}
```

**IHelicopterCollisionSystem** - –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∫–æ–ª–ª–∏–∑–∏–π:
```csharp
public interface IHelicopterCollisionSystem
{
    void Initialize(HelicopterSettings settings);
    void UpdateDetection();
    bool IsGrounded { get; }
    
    Vector2 GroundNormal { get; }
    float DistanceToGround { get; }
}
```

---

## 3. Physics System

### HelicopterPhysics.cs - –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–∞–∑–¥–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Ñ–∏–∑–∏–∫–∞ —Å —É—á–µ—Ç–æ–º –º–∞—Å—Å—ã –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Rigidbody2D –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### HelicopterStateManager.cs - –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
**–õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–ª–∏–∑–∏–π
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–∑–∏–∫–∏ –ø–æ–¥ –∫–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π:**
```csharp
public class CustomStateManager : HelicopterStateManager  
{
    protected override HelicopterState DetermineNewState(Vector2 input, IHelicopterCollisionSystem collisionSystem) 
    {
        // –í–∞—à–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        return base.DetermineNewState(input, collisionSystem);
    }
}
```

### HelicopterCollisionDetector.cs - –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- 8-–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è raycast –¥–µ—Ç–µ–∫—Ü–∏—è
- –¢–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–∏
- –í–µ–∫—Ç–æ—Ä—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## 4. Health System ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏:**
- **–°–∏—Å—Ç–µ–º–∞ –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏**: –í—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞
- **UI –ø–æ–ª–æ—Å–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è**: –ü—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥—ë–∂–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —à–∏—Ä–∏–Ω—ã Fill —ç–ª–µ–º–µ–Ω—Ç–∞
- **–ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è**: Smooth transition –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∑–¥–æ—Ä–æ–≤—å—è
- **–§–∏–∑–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —É—Ä–æ–Ω**: –£—Ä–æ–Ω —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é —É–¥–∞—Ä–∞
- **–ú—è–≥–∫–∏–µ –ø–æ—Å–∞–¥–∫–∏**: –°–∫–æ–ª—å–∂–µ–Ω–∏—è –∏ –∫–∞—Å–∞–Ω–∏—è –Ω–µ –Ω–∞–Ω–æ—Å—è—Ç —É—Ä–æ–Ω
- **–ñ—ë—Å—Ç–∫–∏–µ —É–¥–∞—Ä—ã**: –ß–µ–º –±–æ–ª—å—à–µ —Å–∫–æ—Ä–æ—Å—Ç—å —É–¥–∞—Ä–∞, —Ç–µ–º –±–æ–ª—å—à–µ —É—Ä–æ–Ω (–ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç—å**: –ü–æ–ª—ë—Ç —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –≤–¥–æ–ª—å —Å—Ç–µ–Ω—ã –Ω–µ –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω –ø—Ä–∏ –∫–∞—Å–∞–Ω–∏–∏

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Unity:
**HealthManager:**
- `maxHealth = 100f` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ
- `invulnerabilityTime = 1f` - –≤—Ä–µ–º—è –Ω–µ—É—è–∑–≤–∏–º–æ—Å—Ç–∏ –ø–æ—Å–ª–µ —É—Ä–æ–Ω–∞

**HelicopterHealthIntegration:**
- `minDamageSpeed = 3f` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —É—Ä–æ–Ω–∞
- `damageMultiplier = 10f` - –º–Ω–æ–∂–∏—Ç–µ–ª—å —É—Ä–æ–Ω–∞
- `maxDamage = 50f` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–Ω –∑–∞ —É–¥–∞—Ä

**HealthBarUI:**
- `smoothFill = true` - –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- `fillSpeed = 2f` - —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
- `pulseOnDamage = true` - –ø—É–ª—å—Å–∞—Ü–∏—è –ø—Ä–∏ —É—Ä–æ–Ω–µ
- `flashWhenCritical = true` - –º–∏–≥–∞–Ω–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –∑–¥–æ—Ä–æ–≤—å–µ
- –¶–≤–µ—Ç–æ–≤–∞—è –≥—Ä–∞–¥–∞—Ü–∏—è: –∑–µ–ª—ë–Ω—ã–π ‚Üí –∂—ë–ª—Ç—ã–π ‚Üí –∫—Ä–∞—Å–Ω—ã–π

### Debug –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
**HelicopterHealthIntegration** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- –°–∫–æ—Ä–æ—Å—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–¥–∞—Ä–∞
- –†–∞—Å—á—ë—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –Ω–æ—Ä–º–∞–ª–∏
- –ò—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–Ω —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- –°–æ–±—ã—Ç–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

---

## 6. Visual Effects ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### PropellerRotation.cs - –ê–Ω–∏–º–∞—Ü–∏—è –≤–∏–Ω—Ç–æ–≤
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- **–†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã**: Top propeller (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ) –∏ Back propeller (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ)
- **Smooth rotation**: –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—Ä–∞—â–µ–Ω–∏—è
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è –∑–∞–¥–Ω–µ–≥–æ –ø—Ä–æ–ø–µ–ª–ª–µ—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `maxRotationSpeed = 720f` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
- `rotationSmoothing = 5f` - –ø–ª–∞–≤–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `rotateClockwise` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è

### HelicopterVisualEffects.cs - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
**–≠—Ñ—Ñ–µ–∫—Ç—ã:**
- **–ù–∞–∫–ª–æ–Ω –∫–æ—Ä–ø—É—Å–∞** –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
- **–§–ª–∏–ø —Å–ø—Ä–∞–π—Ç–∞** –ø—Ä–∏ —Å–º–µ–Ω–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã** –≤—Å–µ—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## 7. Troubleshooting (–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫)

### üêõ **–í–µ—Ä—Ç–æ–ª–µ—Ç –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `HelicopterController.settings != null`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `Rigidbody2D` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
  - `Gravity Scale = 1`
  - `Linear Drag = 0` (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π)
  - `Angular Drag = 5`
  - `Collision Detection = Continuous`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–æ–∏ –∫–æ–ª–ª–∏–∑–∏–π –≤ `Physics2D Settings`

### üêõ **–°—Ç—Ä–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–∏–∑–∏–∫–∏:**
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `Time.fixedDeltaTime = 0.02` (50 Hz)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Å–∫—Ä–∏–ø—Ç–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `FixedUpdate()` –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤

### üêõ **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–ª–ª–∏–∑–∏—è–º–∏:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `Collision Detection = Continuous`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–ª–ª–∞–π–¥–µ—Ä—ã –Ω–µ —Å–ª–∏—à–∫–æ–º —Ç–æ–Ω–∫–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Matrix –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `Physics2D Settings`

---

## 8. Integration Guidelines

### üîå **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏:**

**Passenger System:**
```csharp
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞
HelicopterEvents.OnStateChanged.AddListener(OnHelicopterStateChanged);


// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
HelicopterState currentState = helicopterController.GetCurrentState();
Vector2 currentVelocity = helicopterController.GetCurrentVelocity();
```

**Game Manager:**
```csharp
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
HelicopterState currentState = helicopterController.GetCurrentState();
Vector2 inputVector = helicopterController.GetCurrentInput();

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
HelicopterEvents.OnCollision.AddListener(OnHelicopterCrash);
```

**UI System:**
```csharp
// –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
HelicopterEvents.OnStateChanged.AddListener((newState, oldState) => {
    UpdateStateIndicator(newState);
    
});

// –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è—Ö
HelicopterEvents.OnCollision.AddListener((velocity, contacts) => {
    ShowDamageEffect(velocity.magnitude);
    ShakeCamera(velocity.magnitude * 0.1f);
});
```

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:**
```csharp
// –ü—Ä–∏–º–µ—Ä –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, —Ä–µ–∞–≥–∏—Ä—É—é—â–µ–π –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
public class HelicopterSoundSystem : MonoBehaviour, IHelicopterStateListener
{
    public void OnStateChanged(HelicopterState newState, HelicopterState previousState)
    {
        switch(newState)
        {
            case HelicopterState.Flying:
                PlayFlyingSound();
                
            
                
                
            case HelicopterState.Grounded:
                StopEngineSound();
                
        }
    }
}
```

---

## 9. Performance Considerations

### üöÄ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- Raycast –∫–æ–ª–ª–∏–∑–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–ª–∞–≤–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é
- –°–æ–±—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç UnityEvent –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ GC
- –í—Å–µ —Ç—è–∂–µ–ª—ã–µ —Ä–∞—Å—á–µ—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ `FixedUpdate()`

### üìä **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Unity Profiler –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Raycast –≤—ã–∑–æ–≤–æ–≤
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ allocation –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–±—ã—Ç–∏–π

---

## 10. Future Enhancements

### üîÆ **–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- **Particle Effects**: –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–∏—Ü –¥–ª—è –≤–∑—Ä—ã–≤–æ–≤ –∏ —Å–ª–µ–¥–æ–≤
- **Sound Integration**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—É–¥–∏–æ —Å–∏—Å—Ç–µ–º–æ–π
- **Advanced AI**: –ò–ò –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∏–ª–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Multiplayer Support**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Ç–µ–≤–æ–π –∏–≥—Ä—ã
- **Customization**: –°–∏—Å—Ç–µ–º–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞

### üõ†Ô∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- **Component-Based**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- **ECS Integration**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Unity DOTS
- **Data-Oriented**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–æ–≤