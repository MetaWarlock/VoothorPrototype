# üöÅ Helicopter System Integration Guide

## üìã **Quick Start**

### **1. Add New System to Existing Helicopter**
–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫ –≤–∞—à–µ–º—É GameObject —Å –≤–µ—Ä—Ç–æ–ª–µ—Ç–æ–º:

```csharp
// –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–¥–æ–±–∞–≤–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É GameObject)
- HelicopterController        // –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
- HelicopterStateManager      // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- HelicopterPhysics           // –§–∏–∑–∏–∫–∞ (–∑–∞–º–µ–Ω–∏—Ç FlyingSprite)
- HelicopterCollisionDetector // –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–ª–ª–∏–∑–∏–π
- HelicopterTester           // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Inspector**
1. **HelicopterController** - –æ—Å—Ç–∞–≤—å—Ç–µ `Settings = null` (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
2. **HelicopterTester** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å **Rigidbody2D** —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
   - `Linear Drag: 0`
   - `Angular Drag: 0.05`
   - `Gravity Scale: 1`

---

## üîÑ **Migration Path (–ü–æ—à–∞–≥–æ–≤—ã–π –ø–µ—Ä–µ—Ö–æ–¥)**

### **Phase 1: Parallel Testing** ‚ö°
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—É—é –∏ —Å—Ç–∞—Ä—É—é —Å–∏—Å—Ç–µ–º—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (–Ω–µ —É–¥–∞–ª—è–π—Ç–µ FlyingSprite)
2. **–û—Ç–∫–ª—é—á–∏—Ç–µ FlyingSprite** –Ω–∞ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** —Å –ø–æ–º–æ—â—å—é HelicopterTester
4. **–°—Ä–∞–≤–Ω–∏—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º

### **Phase 2: Full Migration** üöÄ
–ö–æ–≥–¥–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ:

1. **–£–¥–∞–ª–∏—Ç–µ FlyingSprite.cs** —Å GameObject
2. **–£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã**:
   - –°—Ç–∞—Ä—ã–µ collision handlers (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –î—É–±–ª–∏—Ä—É—é—â—É—é –ª–æ–≥–∏–∫—É –≤–≤–æ–¥–∞
3. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Å—ã–ª–∫–∏** –≤ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö

---

## üéÆ **State Machine Overview**

### **–°–æ—Å—Ç–æ—è–Ω–∏—è –≤–µ—Ä—Ç–æ–ª–µ—Ç–∞:**
- üõ©Ô∏è **Flying** - –æ–±—ã—á–Ω—ã–π –ø–æ–ª–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üè† **Grounded** - –Ω–∞ –∑–µ–º–ª–µ (–≤—ã—Å–æ–∫–æ–µ —Ç—Ä–µ–Ω–∏–µ, —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ç—è–≥–∞)  
- üß± **WallContact** - –∫–∞—Å–∞–Ω–∏–µ —Å—Ç–µ–Ω—ã (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ)
- üí® **Sliding** - —Å–∫–æ–ª—å–∂–µ–Ω–∏–µ –ø–æ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)
- üåä **InWater** - –≤ –≤–æ–¥–µ (–ë–ï–ó–û–ü–ê–°–ù–ê–Ø –ó–û–ù–ê! –ù–µ—Ç —É—Ä–æ–Ω–∞ + –ø–ª–∞–≤—É—á–µ—Å—Ç—å)

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:**
1. **InWater** (–≤—ã—Å—à–∏–π) - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞
2. **WallContact** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è  
3. **Grounded** vs **Sliding** - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
4. **Flying** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## üõ†Ô∏è **Testing Controls**

### **Keyboard Shortcuts:**
- `1` - Force Flying State
- `2` - Force Grounded State  
- `3` - Force Wall Contact State
- `4` - Force Sliding State
- `5` - Force In Water State

### **Inspector Controls (HelicopterTester):**
- Dropdown –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ "Apply Force State"
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## ‚öôÔ∏è **Configuration**

### **Default Settings:**
–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:

```csharp
// –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
baseMaxSpeed = 5f;           // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
baseAcceleration = 10f;      // –ë–∞–∑–æ–≤–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ  
lateralAccelerationMultiplier = 0.5f;  // –ë–æ–∫–æ–≤–∞—è —Ç—è–≥–∞

// Raycast –¥–µ—Ç–µ–∫—Ü–∏—è
raycastDistance = 0.6f;      // –î–∞–ª—å–Ω–æ—Å—Ç—å –ª—É—á–µ–π
raycastCount = 3;            // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—É—á–µ–π –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```

### **Per-State Parameters:**
```csharp
// –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–í –≤–æ–¥–µ"
inWater = new StateParameters {
    maxSpeedMultiplier = 0.6f,     // 60% –æ—Ç –æ–±—ã—á–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
    accelerationMultiplier = 0.4f,  // 40% –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è
    frictionCoefficient = 0.7f,     // –í—ã—Å–æ–∫–æ–µ —Ç—Ä–µ–Ω–∏–µ –≤ –≤–æ–¥–µ
    buoyancy = 0.2f                // –°–∏–ª–∞ –ø–ª–∞–≤—É—á–µ—Å—Ç–∏ –≤–≤–µ—Ä—Ö
};
```

---

## üêõ **Troubleshooting**

### **–í–µ—Ä—Ç–æ–ª–µ—Ç –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `HelicopterController.settings != null`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `Rigidbody2D` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ HelicopterTester —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### **–°–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è:**
- –í–∫–ª—é—á–∏—Ç–µ `showDebug = true` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –≤ Console
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–≥–∏ –æ–±—ä–µ–∫—Ç–æ–≤ (Ground, Wall, Water)

### **–ö–æ–ª–ª–∏–∑–∏–∏ –Ω–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è:**
- –í–∫–ª—é—á–∏—Ç–µ `showRaycastGizmos = true`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Scene View –ª—É—á–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏  
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –æ–±—ä–µ–∫—Ç—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ–≥–∏

---

## üîß **Advanced Customization**

### **Custom State Parameters:**
–°–æ–∑–¥–∞–π—Ç–µ ScriptableObject –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```csharp
[CreateAssetMenu(menuName = "Helicopter/Custom Settings")]
public class CustomHelicopterSettings : HelicopterSettings
{
    // –í–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

### **Custom State Logic:**
–ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç HelicopterStateManager:

```csharp
public class CustomStateManager : HelicopterStateManager  
{
    protected override HelicopterState DetermineNewState(/*...*/) 
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
        return base.DetermineNewState(/*...*/);
    }
}
```

---

## ‚úÖ **Success Criteria**

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ—Å–ª–∏:

- ‚úÖ –í–µ—Ä—Ç–æ–ª–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –í –≤–æ–¥–µ –Ω–µ—Ç —É—Ä–æ–Ω–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞)
- ‚úÖ –í–µ—Ä—Ç–æ–ª–µ—Ç –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –≤ —Å—Ç–µ–Ω–∞—Ö  
- ‚úÖ –ü—Ä–∏ —Å–∫–æ–ª—å–∂–µ–Ω–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
- ‚úÖ HelicopterTester –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- ‚úÖ Console –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π

**üéâ –ì–æ—Ç–æ–≤–æ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
